var l=class{__destroy_into_raw(){let t=this.__wbg_ptr;return this.__wbg_ptr=0,A.unregister(this),t}free(){let t=this.__destroy_into_raw();a.__wbg_analyzer_free(t,0)}analyze(){return a.analyzer_analyze(this.__wbg_ptr)}constructor(t,n,r){let s=x(t,a.__wbindgen_malloc),o=u,i=a.analyzer_new(s,o,n,r);return this.__wbg_ptr=i>>>0,A.register(this,this.__wbg_ptr,this),this}};Symbol.dispose&&(l.prototype[Symbol.dispose]=l.prototype.free);function z(){return{__proto__:null,"./ai_art_analyzer_bg.js":{__proto__:null,__wbg___wbindgen_debug_string_0bc8482c6e3508ae:function(t,n){let r=h(n),s=M(r,a.__wbindgen_malloc,a.__wbindgen_realloc),o=u;d().setInt32(t+4,o,!0),d().setInt32(t+0,s,!0)},__wbg___wbindgen_throw_be289d5034ed271b:function(t,n){throw new Error(p(t,n))},__wbg_error_7534b8e9a36f1ab4:function(t,n){let r,s;try{r=t,s=n,console.error(p(t,n))}finally{a.__wbindgen_free(r,s,1)}},__wbg_new_361308b2356cecd0:function(){return new Object},__wbg_new_3eb36ae241fe6f44:function(){return new Array},__wbg_new_8a6f238a6ece86ea:function(){return new Error},__wbg_set_3f1d0b984ed272ed:function(t,n,r){t[n]=r},__wbg_set_f43e577aea94465b:function(t,n,r){t[n>>>0]=r},__wbg_stack_0ed75d68575b0f3c:function(t,n){let r=n.stack,s=M(r,a.__wbindgen_malloc,a.__wbindgen_realloc),o=u;d().setInt32(t+4,o,!0),d().setInt32(t+0,s,!0)},__wbindgen_cast_0000000000000001:function(t){return t},__wbindgen_cast_0000000000000002:function(t,n){return p(t,n)},__wbindgen_init_externref_table:function(){let t=a.__wbindgen_externrefs,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)}}}}var A=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>a.__wbg_analyzer_free(e>>>0,1));function h(e){let t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){let s=e.description;return s==null?"Symbol":`Symbol(${s})`}if(t=="function"){let s=e.name;return typeof s=="string"&&s.length>0?`Function(${s})`:"Function"}if(Array.isArray(e)){let s=e.length,o="[";s>0&&(o+=h(e[0]));for(let i=1;i<s;i++)o+=", "+h(e[i]);return o+="]",o}let n=/\[object ([^\]]+)\]/.exec(toString.call(e)),r;if(n&&n.length>1)r=n[1];else return toString.call(e);if(r=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:r}var _=null;function d(){return(_===null||_.buffer.detached===!0||_.buffer.detached===void 0&&_.buffer!==a.memory.buffer)&&(_=new DataView(a.memory.buffer)),_}function p(e,t){return e=e>>>0,O(e,t)}var b=null;function y(){return(b===null||b.byteLength===0)&&(b=new Uint8Array(a.memory.buffer)),b}function x(e,t){let n=t(e.length*1,1)>>>0;return y().set(e,n/1),u=e.length,n}function M(e,t,n){if(n===void 0){let c=g.encode(e),f=t(c.length,1)>>>0;return y().subarray(f,f+c.length).set(c),u=c.length,f}let r=e.length,s=t(r,1)>>>0,o=y(),i=0;for(;i<r;i++){let c=e.charCodeAt(i);if(c>127)break;o[s+i]=c}if(i!==r){i!==0&&(e=e.slice(i)),s=n(s,r,r=i+e.length*3,1)>>>0;let c=y().subarray(s+i,s+r),f=g.encodeInto(e,c);i+=f.written,s=n(s,r,i,1)>>>0}return u=i,s}var w=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});w.decode();var R=2146435072,m=0;function O(e,t){return m+=t,m>=R&&(w=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),w.decode(),m=t),w.decode(y().subarray(e,e+t))}var g=new TextEncoder;"encodeInto"in g||(g.encodeInto=function(e,t){let n=g.encode(e);return t.set(n),{read:e.length,written:n.length}});var u=0,E,a;function T(e,t){return a=e.exports,E=t,_=null,b=null,a.__wbindgen_start(),a}async function j(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(s){if(e.ok&&n(e.type)&&e.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",s);else throw s}let r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}else{let r=await WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}function n(r){switch(r){case"basic":case"cors":case"default":return!0}return!1}}async function S(e){if(a!==void 0)return a;e!==void 0&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),e===void 0&&(e=new URL("ai_art_analyzer_bg.wasm",import.meta.url));let t=z();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));let{instance:n,module:r}=await j(await e,t);return T(n,r)}var W=!1;async function k(){try{await S("/pkg/ai_art_analyzer_bg.wasm"),W=!0,self.postMessage({type:"ready"})}catch(e){console.error("WASM init error:",e),self.postMessage({type:"error",error:"Failed to initialize WASM: "+String(e)})}}self.onmessage=async e=>{let{type:t,data:n,width:r,height:s}=e.data;if(console.log("[Worker] Received message:",t,"size:",r,"x",s),t==="analyze"){if(!W){self.postMessage({type:"error",error:"WASM not ready"});return}try{self.postMessage({type:"progress",step:"Creating analyzer..."}),console.log("[Worker] Creating analyzer with",n.byteLength,"bytes");let o=new l(new Uint8Array(n),r,s);self.postMessage({type:"progress",step:"Running 9 detection methods..."}),console.log("[Worker] Starting analysis...");let i=performance.now(),c=o.analyze(),f=performance.now()-i;console.log("[Worker] Analysis completed in",f.toFixed(0),"ms"),self.postMessage({type:"result",result:c}),o.free()}catch(o){console.error("[Worker] Error:",o),self.postMessage({type:"error",error:String(o)})}}};k();
